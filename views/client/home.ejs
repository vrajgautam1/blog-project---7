<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Blog</title>
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css">


  
  <link rel="stylesheet" href="/home.css">
</head>

<body class="container">

  <!-- Navbar -->
  <%- include("./partials/navBar.ejs") %>

  <!-- Hero Section -->
  <header class="text-center py-5 bg-light">
    <div class="container">
      <h1 class="fw-bold">Explore Amazing Stories</h1>
      <p class="lead text-muted">Discover the latest insights, travel experiences, and creative ideas.</p>
      <a href="#" class="btn btn-primary btn-lg">Get Started</a>
    </div>
  </header>

  <!-- Blog Section -->
  <!-- <% 
  if(success.length){ %>
    <div class="toast align-items-center w-100" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body text-success bg-body-success">
          <%= success %>
        </div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  <% } %> -->

    <div class="row row-cols-1 g-4">

      <% blogs.forEach((blog) => { %>
        <a href="/singleBlogPage/<%= blog.id %>">
      <div class="col">
        <div class="card shadow-sm d-flex flex-row p-3">

          

          <!-- Blog Content -->
          <div class="card-body">
            <div class="blog-meta d-flex gap-3 mb-2">
              <span><i class="bi bi-person-circle"></i> Vraj Gautam</span>
              <span><i class="bi bi-pencil-square"></i> Creativity</span>
            </div>
            
            <h4 class="fw-bold"><%= blog.title %></h4>
            
            <p>
              <% let text = blog.description; %>
              <% let limit = 120; %>
              <%- text.length > limit ? text.substring(0, limit) + "... <a href='#' class='read-more'>read more</a>" : text %>
            </p>

            <div class="blog-meta d-flex gap-3">
              <small><i class="bi bi-calendar"></i> <%= new Date(blog.createdAt).toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric" }) %></small>
              <small><i class="bi bi-suit-heart-fill"></i> 24k Likes</small>
              <small><i class="bi bi-chat-fill"></i> 1052 Comments</small>
              <small><i class="bi bi-clock"></i> 9 min read</small>
            </div>

            <div class="mt-3">
              <a href="#" class="btn btn-sm btn-primary">Read More</a>
              <a href="editBlog/<%= blog.id%>" class="btn btn-sm btn-outline-secondary">Edit</a>
              <a href="/deleteBlog/<%= blog.id%>" class="btn btn-sm btn-outline-danger">Delete</a>
            </div>
          </div>

          <!-- Image -->
          <div class="d-flex align-items-center me-3">
            <img src="/uploads/<%= blog.coverImage %>" class="blog-image" alt="Blog Image">
          </div>
        </div>
      </div>
    </a>
      <% }) %>

    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 My Blog | All Rights Reserved</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


<!-- 
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var toastEl = document.querySelector(".toast");
      var toast = new bootstrap.Toast(toastEl);
      toast.show(); // Show the toast automatically
    });
  </script>
   -->

     <!-- sweety -->
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <% 
  if(success.length){%>
    <script>
      swal({
    title: "Good job!",
    text: "<%= success %>",
    icon: "success",
  });
    </script>
  <%}%>
  

</body>
</html>
